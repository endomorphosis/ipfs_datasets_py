/home/devel/ipfs_datasets_py/ipfs_datasets_py/search/__init__.py:9: UserWarning: search_embeddings using mock implementation due to missing dependencies: cannot import name 'install_ipfs' from partially initialized module 'ipfs_kit_py.ipfs_kit' (most likely due to a circular import) (/usr/local/lib/python3.12/dist-packages/ipfs_kit_py/ipfs_kit.py)
  warnings.warn(f"search_embeddings using mock implementation due to missing dependencies: {e}")
[nltk_data] Error loading taggers/averaged_perceptron_tagger: Package
[nltk_data]     'taggers/averaged_perceptron_tagger' not found in
[nltk_data]     index
[nltk_data] Error loading chunkers/maxent_ne_chunker: Package
[nltk_data]     'chunkers/maxent_ne_chunker' not found in index
======================================================================
ğŸ§ª P2P CACHE INTEROPERABILITY TEST SUITE
======================================================================

Testing ipfs_datasets_py P2P cache implementation...

ğŸ§ª Test 1: Basic Cache Operations
âš  Warning: Could not import ipfs_kit_py: cannot import name 'install_ipfs' from partially initialized module 'ipfs_kit_py.ipfs_kit' (most likely due to a circular import) (/usr/local/lib/python3.12/dist-packages/ipfs_kit_py/ipfs_kit.py)
Failed to import mcp.server. Please ensure the mcp library is installed.
Warning: OCR engines not available: No module named 'cachetools'
  âœ… Basic cache operations work correctly

ğŸ§ª Test 2: Multiformats Content Hashing
  âœ… Content hashing works (hash: bafkreibd4sr722j...)

ğŸ§ª Test 3: TTL Expiration
  â³ Waiting 2 seconds for TTL expiration...
  âœ… TTL expiration works correctly

ğŸ§ª Test 4: Staleness Detection
  â„¹ï¸  Note: Automatic staleness detection based on content hash
  âœ… Staleness detection works correctly

ğŸ§ª Test 5: Disk Persistence
  âœ… Disk persistence works (1 files)

ğŸ§ª Test 6: P2P Networking Initialization
  âš ï¸  P2P initialization attempted but not fully enabled (requires async runtime)
     This is expected in synchronous test environment

ğŸ§ª Test 7: Message Encryption
  âœ… Message encryption initialized successfully

ğŸ§ª Test 8: Cross-Package Compatibility
  âœ… Cache format is interoperable between packages

======================================================================
ğŸ“Š TEST SUMMARY
======================================================================

âœ… PASSED: 8/8
   â€¢ Basic Cache Operations
   â€¢ Multiformats Content Hashing
   â€¢ TTL Expiration
   â€¢ Staleness Detection
   â€¢ Disk Persistence
   â€¢ P2P Networking Initialization (attempted)
   â€¢ Message Encryption
   â€¢ Cross-Package Compatibility

======================================================================
âœ… ALL TESTS PASSED
